/* ibm-plex-sans-kr-300 - korean_latin */
@font-face {
  font-family: 'IBM Plex Sans KR';
  font-style: normal;
  font-weight: 300;
  font-display: swap; /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
  src:
    local('IBM Plex Sans KR'),
    url('/assets/fonts/ibm-plex-sans-kr-v10-korean_latin-300.woff2') format('woff2'),
    url('/assets/fonts/ibm-plex-sans-kr-v10-korean_latin-300.ttf') format('truetype');
}

/* ibm-plex-sans-kr-500 - korean_latin */
@font-face {
  font-family: 'IBM Plex Sans KR';
  font-style: normal;
  font-weight: 500;
  font-display: swap; /* Check https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display for other options. */
  src:
    local('IBM Plex Sans KR'),
    url('/assets/fonts/ibm-plex-sans-kr-v10-korean_latin-500.woff2') format('woff2'), /* Chrome 36+, Opera 23+, Firefox 39+, Safari 12+, iOS 10+ */
    url('/assets/fonts/ibm-plex-sans-kr-v10-korean_latin-500.ttf') format('truetype'); /* Chrome 4+, Firefox 3.5+, IE 9+, Safari 3.1+, iOS 4.2+, Android Browser 2.2+ */
}

@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  font-weight: 300;
  cursor: url('/assets/images/cursor.svg'), url('/assets/images/cursor.png'), auto;
}

pre {
  overflow: auto;
}

@layer base {
  :root {
    --bg: #ffffff;
    --fg: #111827;
    --muted: #6b7280;
    --border: #e5e7eb;
    --surface: #ffffff;
    --code-bg: #f5f7fb;
    --code-border: #e5e7eb;
    --selection: #e0e7ff;
  }

  .dark {
    --bg: #0e1628;
    --surface: #121b30;
    --fg: #e6edf3;
    --muted: #9aa7b5;
    --border: #243045;
    --code-bg: #0b1324;
    --code-border: #1b2740;
    --selection: #1f3a5b;
  }

  body { background-color: var(--bg); color: var(--fg); }
  *, ::before, ::after { border-color: var(--border); }

  a { color: var(--link); }
  ::selection, ::-moz-selection {
    background: var(--selection);
    color: var(--fg);
  }

  pre, code, kbd, samp { font-weight: 400; }

  .dark pre {
    background: var(--code-bg);
    border: 1px solid var(--code-border);
    border-radius: .5rem;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
  }

  .dark :not(pre) > code {
    background: color-mix(in srgb, var(--code-bg) 92%, transparent);
    border: 1px solid var(--code-border);
    border-radius: .35rem;
    padding: .1rem .3rem;
    color: inherit;
  }

  .dark .prose {
    --tw-prose-body: var(--tw-prose-invert-body);
    --tw-prose-headings: var(--tw-prose-invert-headings);
    --tw-prose-lead: var(--tw-prose-invert-lead);
    --tw-prose-links: var(--link);
    --tw-prose-bold: var(--tw-prose-invert-bold);
    --tw-prose-counters: var(--tw-prose-invert-counters);
    --tw-prose-bullets: var(--tw-prose-invert-bullets);
    --tw-prose-hr: var(--border);
    --tw-prose-quotes: var(--tw-prose-invert-quotes);
    --tw-prose-quote-borders: var(--border);
    --tw-prose-captions: var(--muted);
    --tw-prose-kbd: var(--fg);
    --tw-prose-kbd-shadows: 255 255 255;
    --tw-prose-code: var(--fg);
    --tw-prose-pre-code: #c9d1d9;
    --tw-prose-pre-bg: var(--code-bg);
    --tw-prose-th-borders: var(--border);
    --tw-prose-td-borders: var(--border);
  }

  .dark .text-black   { color: var(--fg) !important; }
  .dark .border-black { border-color: var(--fg) !important; }
  .dark .bg-gray-300  { background-color: #1b2740 !important; }
}

@layer components {
  /* ===== Theme Switch (refined) ===== */
  .theme-switch {
    /* size tokens */
    --ts-w: 64px;              /* track width  */
    --ts-h: 34px;              /* track height */
    --ts-pad: 5px;             /* inner padding */
    --ts-knob: 25px;           /* knob size */
    --ts-shift: calc(var(--ts-w) - (var(--ts-pad) * 2) - var(--ts-knob));
    --ts-icon: 14px;           /* icon size */

    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--ts-w);
    height: var(--ts-h);
    padding: var(--ts-pad);
    border-radius: 9999px;
    border: 1px solid var(--border);
    background: var(--surface);
    margin-left: 12px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transition: background-color .2s ease, border-color .2s ease, box-shadow .2s ease;
  }
  .theme-switch:hover { box-shadow: 0 2px 8px rgba(0,0,0,.06); }
  .theme-switch:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(59,130,246,.45); /* focus ring */
  }
  .dark .theme-switch { background: #0f1a2e; border-color: #243045; }

  /* icons */
  .theme-switch [data-sun],
  .theme-switch [data-moon] {
    position: absolute;
    width: var(--ts-icon);
    height: var(--ts-icon);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    pointer-events: none;
    opacity: .6;
    color: #334155;              /* light 대비 */
    filter: drop-shadow(0 1px 1px rgba(0,0,0,.25));
    transition: opacity .2s ease, color .2s ease;
  }
  .theme-switch [data-sun]  { left: 8px; }
  .theme-switch [data-moon] { right: 8px; }
  .dark .theme-switch [data-sun],
  .dark .theme-switch [data-moon] { color: #cbd5e1; } /* dark 대비 */

  .theme-switch [data-sun] svg,
  .theme-switch [data-moon] svg { width: 100%; height: 100%; display: block; }

  /* knob */
  .theme-switch [data-knob] {
    position: absolute;
    top: var(--ts-pad);
    left: var(--ts-pad);
    width: var(--ts-knob);
    height: var(--ts-knob);
    border-radius: 9999px;
    background: var(--fg);
    transition: transform .22s cubic-bezier(.4,0,.2,1), background-color .2s;
    will-change: transform;
  }
  .dark .theme-switch [data-knob] { background: #e6edf3; }

  /* state */
  .theme-switch[aria-pressed="true"]  [data-knob] { transform: translateX(var(--ts-shift)); }
  .theme-switch[aria-pressed="true"]  [data-sun]  { opacity: .3; }
  .theme-switch[aria-pressed="true"]  [data-moon] { opacity: .95; }
  .theme-switch[aria-pressed="false"] [data-sun]  { opacity: .95; }
  .theme-switch[aria-pressed="false"] [data-moon] { opacity: .3; }

  /* press feedback */
  .theme-switch:active [data-knob] { transform: translateX(0) scale(.96); }
  .theme-switch[aria-pressed="true"]:active [data-knob] { transform: translateX(var(--ts-shift)) scale(.96); }

  /* reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .theme-switch,
    .theme-switch [data-knob],
    .theme-switch [data-sun],
    .theme-switch [data-moon] {
      transition: none !important;
    }
  }

  /* screen-reader only */
  .sr-only {
    position: absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
    clip:rect(0,0,0,0); white-space:nowrap; border:0;
  }
}